@model ChartsViewModel;
@using Newtonsoft.Json;

<script src="~/js/canvasjs.min.js"> </script>
@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>

</div>

<div id="chartContainer"></div>

<script type="text/javascript">

    // result = JSON.parse('Html.Raw(JsonConvert.SerializeObject(Model.DataPoints))');
    // var result = Html.Raw(JsonConvert.SerializeObject(Model.DataPoints));
    var result = @Html.Raw(Json.Serialize(Model.DataPoints));

    var datapoints = [];
    for (var i = 0; i < result.length; i++) {
        datapoints.push({ label: result[i].x, y: result[i].y });
    }

    window.onload = function () {
        var chart = new CanvasJS.Chart("chartContainer", {
            theme: "light2",
            animationEnabled: true,
            title: {
                text: "Total Transfers by Employee"
            },
            subtitles: [
                { text: "Try Resizing the Browser" }
            ],
            data: [
                {
                    type: "column", //change type to bar, line, area, pie, etc
                    dataPoints: datapoints
                }
            ]
        });
        chart.render();
    };
</script>

